2025-09-19 10:14:07,310 - __main__ - ERROR - OPENAI_API_KEY environment variable not set
2025-09-19 10:14:14,306 - __main__ - ERROR - OPENAI_API_KEY environment variable not set
2025-09-19 10:14:30,837 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8100
 * Running on http://192.168.1.175:8100
2025-09-19 10:14:30,837 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-19 10:14:30,838 - werkzeug - INFO -  * Restarting with stat
2025-09-19 10:14:30,956 - werkzeug - WARNING -  * Debugger is active!
2025-09-19 10:14:30,962 - werkzeug - INFO -  * Debugger PIN: 106-075-751
2025-09-19 10:16:30,683 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:16:30] "[33mGET / HTTP/1.1[0m" 404 -
2025-09-19 10:16:30,708 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:16:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-09-19 10:17:09,348 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:17:09] "[33mGET / HTTP/1.1[0m" 404 -
2025-09-19 10:19:36,093 - __main__ - ERROR - OPENAI_API_KEY environment variable not set
2025-09-19 10:19:48,730 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:19:48] "GET /health HTTP/1.1" 200 -
2025-09-19 10:20:08,153 - __main__ - INFO - Processing webhook: {'message_id': 'test_12345', 'chat_time': '2025-09-19T10:20:00Z', 'chat_name': 'Test Customer', 'phone_number': '+905551234567', 'current_message': 'I need technical support with my bicycle brake system', 'history': [{'sender': 'Test Customer', 'content': 'Hello, I have an issue with my bike', 'timestamp': '2025-09-19T10:19:00Z', 'type': 'text'}]}
2025-09-19 10:20:08,164 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:20:08,164 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:20:08,164 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:20:08] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:21:29,208 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:21:29] "[33mGET / HTTP/1.1[0m" 404 -
2025-09-19 10:21:34,560 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:21:34] "[33mGET / HTTP/1.1[0m" 404 -
2025-09-19 10:21:47,581 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:21:47] "GET /health HTTP/1.1" 200 -
2025-09-19 10:21:47,713 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:21:47,713 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:21:47] "GET /stats HTTP/1.1" 200 -
2025-09-19 10:23:01,951 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:23:01] "[33mGET / HTTP/1.1[0m" 404 -
2025-09-19 10:24:31,973 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:24:31,973 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:24:31] "GET /stats HTTP/1.1" 200 -
2025-09-19 10:25:55,476 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.12345_test', 'chat_time': '2025-09-19T10:30:00Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri', 'phone_number': '+905551234567', 'current_message': 'Merhaba, bisikletimin freni Ã§alÄ±ÅŸmÄ±yor. YardÄ±m edebilir misiniz?', 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri', 'content': 'Selam, bir sorunum var', 'timestamp': '2025-09-19T10:28:00Z', 'type': 'text'}, {'sender': 'Ä°zer Support', 'content': 'Merhaba! Size nasÄ±l yardÄ±mcÄ± olabilirim?', 'timestamp': '2025-09-19T10:29:00Z', 'type': 'text'}]}
2025-09-19 10:25:55,477 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:25:55,477 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:25:55,477 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:25:55] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:27:29,553 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919102729_real', 'chat_time': '2025-09-19T10:27:29.548247Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'phone_number': '+905551234567', 'current_message': 'Merhaba Ä°zer, geÃ§en hafta aldÄ±ÄŸÄ±m Giant TCR bisikletinin vites deÄŸiÅŸimi Ã§ok sert. Ayar gerekiyor mu? AyrÄ±ca Ã¶n fren diski gÄ±cÄ±rdÄ±yor. Ne zaman servis randevusu alabilirim?', 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Selam, yeni aldÄ±ÄŸÄ±m bisikletle ilgili sorularÄ±m var', 'timestamp': '2025-09-19T08:30:00Z', 'type': 'text'}, {'sender': 'Ä°zer Support', 'content': 'Merhaba Ahmet Bey! Tabii ki, size yardÄ±mcÄ± olmaktan mutluluk duyarÄ±z. SorunlarÄ±nÄ±zÄ± dinliyorum.', 'timestamp': '2025-09-19T08:31:00Z', 'type': 'text'}, {'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Giant TCR Advanced Pro aldÄ±m geÃ§en hafta. Ã‡ok memnunum ama kÃ¼Ã§Ã¼k sorunlar var', 'timestamp': '2025-09-19T08:32:00Z', 'type': 'text'}]}
2025-09-19 10:27:29,554 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:27:29,554 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:27:29,554 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:27:29] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:27:29,556 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919102729_urgent', 'chat_time': '2025-09-19T10:27:29.548251Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'phone_number': '+905559876543', 'current_message': "ACÄ°L! Bisikletimin fren kablosu koptu, ÅŸu anda yolda kaldÄ±m. YakÄ±nda tamirci var mÄ±? Ankara Ã‡ankaya'dayÄ±m.", 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'content': 'YardÄ±m edin lÃ¼tfen!', 'timestamp': '2025-09-19T09:45:00Z', 'type': 'text'}]}
2025-09-19 10:27:29,556 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:27:29,556 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:27:29,556 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:27:29] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:27:29,558 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919102729_sales', 'chat_time': '2025-09-19T10:27:29.548253Z', 'chat_name': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'phone_number': '+905557894561', 'current_message': 'Merhaba, elektrikli bisiklet modelleri ve fiyatlarÄ± hakkÄ±nda bilgi alabilir miyim? Ã–zellikle ÅŸehir iÃ§i kullanÄ±m iÃ§in uygun olanlarÄ± merak ediyorum. BÃ¼tÃ§em 15-20 bin TL arasÄ±.', 'history': [{'sender': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'content': 'Ä°yi gÃ¼nler, e-bike bakÄ±yorum', 'timestamp': '2025-09-19T07:20:00Z', 'type': 'text'}, {'sender': 'Ä°zer Sales', 'content': 'Merhaba! E-bike modellerimiz iÃ§in size yardÄ±mcÄ± olabilirim. Hangi amaÃ§la kullanacaksÄ±nÄ±z?', 'timestamp': '2025-09-19T07:21:00Z', 'type': 'text'}]}
2025-09-19 10:27:29,558 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:27:29,558 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:27:29,558 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:27:29] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:28:29,901 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:28:29,901 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:28:29] "GET /stats HTTP/1.1" 200 -
2025-09-19 10:30:10,083 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8100
 * Running on http://192.168.1.175:8100
2025-09-19 10:30:10,083 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-19 10:30:10,084 - werkzeug - INFO -  * Restarting with stat
2025-09-19 10:30:10,202 - werkzeug - WARNING -  * Debugger is active!
2025-09-19 10:30:10,207 - werkzeug - INFO -  * Debugger PIN: 106-075-751
2025-09-19 10:30:14,407 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:30:14] "GET /health HTTP/1.1" 200 -
2025-09-19 10:30:38,335 - __main__ - INFO - Processing webhook: {'message_id': 'test_12345', 'chat_time': '2025-09-19T10:20:00Z', 'chat_name': 'Test Customer', 'phone_number': '+905551234567', 'current_message': 'I need technical support with my bicycle brake system', 'history': [{'sender': 'Test Customer', 'content': 'Hello, I have an issue with my bike', 'timestamp': '2025-09-19T10:19:00Z', 'type': 'text'}]}
2025-09-19 10:30:38,339 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:30:38,339 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:30:38,339 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:30:38] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:30:44,983 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919103044_real', 'chat_time': '2025-09-19T10:30:44.978861Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'phone_number': '+905551234567', 'current_message': 'Merhaba Ä°zer, geÃ§en hafta aldÄ±ÄŸÄ±m Giant TCR bisikletinin vites deÄŸiÅŸimi Ã§ok sert. Ayar gerekiyor mu? AyrÄ±ca Ã¶n fren diski gÄ±cÄ±rdÄ±yor. Ne zaman servis randevusu alabilirim?', 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Selam, yeni aldÄ±ÄŸÄ±m bisikletle ilgili sorularÄ±m var', 'timestamp': '2025-09-19T08:30:00Z', 'type': 'text'}, {'sender': 'Ä°zer Support', 'content': 'Merhaba Ahmet Bey! Tabii ki, size yardÄ±mcÄ± olmaktan mutluluk duyarÄ±z. SorunlarÄ±nÄ±zÄ± dinliyorum.', 'timestamp': '2025-09-19T08:31:00Z', 'type': 'text'}, {'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Giant TCR Advanced Pro aldÄ±m geÃ§en hafta. Ã‡ok memnunum ama kÃ¼Ã§Ã¼k sorunlar var', 'timestamp': '2025-09-19T08:32:00Z', 'type': 'text'}]}
2025-09-19 10:30:44,984 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:30:44,984 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:30:44,984 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:30:44] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:30:44,985 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919103044_urgent', 'chat_time': '2025-09-19T10:30:44.978865Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'phone_number': '+905559876543', 'current_message': "ACÄ°L! Bisikletimin fren kablosu koptu, ÅŸu anda yolda kaldÄ±m. YakÄ±nda tamirci var mÄ±? Ankara Ã‡ankaya'dayÄ±m.", 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'content': 'YardÄ±m edin lÃ¼tfen!', 'timestamp': '2025-09-19T09:45:00Z', 'type': 'text'}]}
2025-09-19 10:30:44,986 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:30:44,986 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:30:44,986 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:30:44] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:30:44,987 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919103044_sales', 'chat_time': '2025-09-19T10:30:44.978868Z', 'chat_name': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'phone_number': '+905557894561', 'current_message': 'Merhaba, elektrikli bisiklet modelleri ve fiyatlarÄ± hakkÄ±nda bilgi alabilir miyim? Ã–zellikle ÅŸehir iÃ§i kullanÄ±m iÃ§in uygun olanlarÄ± merak ediyorum. BÃ¼tÃ§em 15-20 bin TL arasÄ±.', 'history': [{'sender': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'content': 'Ä°yi gÃ¼nler, e-bike bakÄ±yorum', 'timestamp': '2025-09-19T07:20:00Z', 'type': 'text'}, {'sender': 'Ä°zer Sales', 'content': 'Merhaba! E-bike modellerimiz iÃ§in size yardÄ±mcÄ± olabilirim. Hangi amaÃ§la kullanacaksÄ±nÄ±z?', 'timestamp': '2025-09-19T07:21:00Z', 'type': 'text'}]}
2025-09-19 10:30:44,988 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:30:44,988 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:30:44,988 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:30:44] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 10:32:47,479 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.test_1758267167459_1', 'chat_time': '2025-09-19T07:32:47.459Z', 'chat_name': 'Test MÃ¼ÅŸteri - Ahmet', 'phone_number': '+905551234567', 'current_message': 'Bisikletimin freni Ã§alÄ±ÅŸmÄ±yor, acil yardÄ±m lazÄ±m!', 'history': [{'sender': 'Test MÃ¼ÅŸteri - Ahmet', 'content': 'Merhaba Ä°zer', 'timestamp': '2025-09-19T07:31:47.462Z', 'type': 'text'}]}
2025-09-19 10:32:47,480 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 10:32:47,480 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 10:32:47,480 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 10:32:47] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 11:04:48,215 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919110448_real', 'chat_time': '2025-09-19T11:04:48.208458Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'phone_number': '+905551234567', 'current_message': 'Merhaba Ä°zer, geÃ§en hafta aldÄ±ÄŸÄ±m Giant TCR bisikletinin vites deÄŸiÅŸimi Ã§ok sert. Ayar gerekiyor mu? AyrÄ±ca Ã¶n fren diski gÄ±cÄ±rdÄ±yor. Ne zaman servis randevusu alabilirim?', 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Selam, yeni aldÄ±ÄŸÄ±m bisikletle ilgili sorularÄ±m var', 'timestamp': '2025-09-19T08:30:00Z', 'type': 'text'}, {'sender': 'Ä°zer Support', 'content': 'Merhaba Ahmet Bey! Tabii ki, size yardÄ±mcÄ± olmaktan mutluluk duyarÄ±z. SorunlarÄ±nÄ±zÄ± dinliyorum.', 'timestamp': '2025-09-19T08:31:00Z', 'type': 'text'}, {'sender': 'Ä°zer MÃ¼ÅŸteri - Ahmet YÄ±lmaz', 'content': 'Giant TCR Advanced Pro aldÄ±m geÃ§en hafta. Ã‡ok memnunum ama kÃ¼Ã§Ã¼k sorunlar var', 'timestamp': '2025-09-19T08:32:00Z', 'type': 'text'}]}
2025-09-19 11:04:48,217 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 11:04:48,217 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 11:04:48,217 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 11:04:48] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 11:04:48,220 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919110448_urgent', 'chat_time': '2025-09-19T11:04:48.208463Z', 'chat_name': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'phone_number': '+905559876543', 'current_message': "ACÄ°L! Bisikletimin fren kablosu koptu, ÅŸu anda yolda kaldÄ±m. YakÄ±nda tamirci var mÄ±? Ankara Ã‡ankaya'dayÄ±m.", 'history': [{'sender': 'Ä°zer MÃ¼ÅŸteri - Fatma Demir', 'content': 'YardÄ±m edin lÃ¼tfen!', 'timestamp': '2025-09-19T09:45:00Z', 'type': 'text'}]}
2025-09-19 11:04:48,220 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 11:04:48,220 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 11:04:48,220 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 11:04:48] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-09-19 11:04:48,222 - __main__ - INFO - Processing webhook: {'message_id': 'wamid.20250919110448_sales', 'chat_time': '2025-09-19T11:04:48.208466Z', 'chat_name': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'phone_number': '+905557894561', 'current_message': 'Merhaba, elektrikli bisiklet modelleri ve fiyatlarÄ± hakkÄ±nda bilgi alabilir miyim? Ã–zellikle ÅŸehir iÃ§i kullanÄ±m iÃ§in uygun olanlarÄ± merak ediyorum. BÃ¼tÃ§em 15-20 bin TL arasÄ±.', 'history': [{'sender': 'Potansiyel MÃ¼ÅŸteri - Can Ã–zkan', 'content': 'Ä°yi gÃ¼nler, e-bike bakÄ±yorum', 'timestamp': '2025-09-19T07:20:00Z', 'type': 'text'}, {'sender': 'Ä°zer Sales', 'content': 'Merhaba! E-bike modellerimiz iÃ§in size yardÄ±mcÄ± olabilirim. Hangi amaÃ§la kullanacaksÄ±nÄ±z?', 'timestamp': '2025-09-19T07:21:00Z', 'type': 'text'}]}
2025-09-19 11:04:48,222 - __main__ - ERROR - Database connection error: 2003 (HY000): Can't connect to MySQL server on 'localhost:3306' (61)
2025-09-19 11:04:48,222 - __main__ - ERROR - Failed to save webhook message to database
2025-09-19 11:04:48,222 - werkzeug - INFO - 127.0.0.1 - - [19/Sep/2025 11:04:48] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
